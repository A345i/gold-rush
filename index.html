<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ó–æ–ª–æ—Ç–∞—è –õ–∏—Ö–æ—Ä–∞–¥–∫–∞</title>
    <!-- Babylon.js CDN -->
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script>
    <style>
        html, body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            background-color: #000;
            font-family: Arial, sans-serif;
            color: #fff;
        }
        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
        #ui {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .panel {
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
        }
        .panel h3 {
            margin: 0 0 5px 0;
            font-size: 16px;
        }
        .panel button {
            width: 100%;
            padding: 5px;
            margin-top: 5px;
            border: none;
            border-radius: 3px;
            background-color: #ffd700;
            color: #000;
            cursor: pointer;
        }
        .panel button:disabled {
            background-color: #999;
            cursor: not-allowed;
        }

	.gold-text {
  		color: #FFD700;
	}

	.gold-background {
  		background-color: #D4AF37;
	}
    </style>
</head>
<body>
    <canvas id="renderCanvas"></canvas>
    <div id="ui">
        <div class="panel" id="goldPanel">
            <h3>–ó–æ–ª–æ—Ç–æ: <span id="goldCount" class="gold-text">0</span> ü™ô</h3>
        </div>
        <div class="panel" id="upgradePanel">
            <h3>–ê–ø–≥—Ä–µ–π–¥—ã</h3>
            <button id="upgradeClick">–£–≤–µ–ª–∏—á–∏—Ç—å –∑–æ–ª–æ—Ç–æ –∑–∞ –∫–ª–∏–∫ (–°—Ç–æ–∏–º–æ—Å—Ç—å: <span id="upgradeClickCost">10</span>)</button>
            <button id="upgradeAuto">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–±—ã—á–∞ (–°—Ç–æ–∏–º–æ—Å—Ç—å: <span id="upgradeAutoCost">50</span>)</button>
        </div>
        <div class="panel" id="statsPanel">
            <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
            <p>–ö–ª–∏–∫–∏: <span id="clickCount">0</span></p>
            <p>ü™ô –≤ —Å–µ–∫—É–Ω–¥—É: <span id="goldPerSecond">0</span></p>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–≥—Ä—ã
        let gold = 0;
        let goldPerClick = 1;
        let goldPerSecond = 0;
        let clickCount = 0;
        let upgradeClickCost = 10;
        let upgradeAutoCost = 50;
        let autoUpgradeCount = 0;

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
        function updateUI() {
            document.getElementById('goldCount').innerText = gold;
            document.getElementById('clickCount').innerText = clickCount;
            document.getElementById('goldPerSecond').innerText = goldPerSecond;
            document.getElementById('upgradeClickCost').innerText = upgradeClickCost;
            document.getElementById('upgradeAutoCost').innerText = upgradeAutoCost;

            // –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –∞–ø–≥—Ä–µ–π–¥–æ–≤
            document.getElementById('upgradeClick').disabled = gold < upgradeClickCost;
            document.getElementById('upgradeAuto').disabled = gold < upgradeAutoCost;
        }

        // –õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –¥–æ–±—ã—á–∏ –∑–æ–ª–æ—Ç–∞
        setInterval(() => {
            gold += goldPerSecond;
            updateUI();
        }, 1000);

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ü–µ–Ω—ã Babylon.js
        const canvas = document.getElementById('renderCanvas');
        const engine = new BABYLON.Engine(canvas, true);
        const scene = new BABYLON.Scene(engine);

        // –ö–∞–º–µ—Ä–∞
        const camera = new BABYLON.ArcRotateCamera("Camera", -Math.PI / 2, Math.PI / 2.5, 5, BABYLON.Vector3.Zero(), scene);
        camera.attachControl(canvas, true);

        // –°–≤–µ—Ç
        const light = new BABYLON.HemisphericLight("light1", new BABYLON.Vector3(1, 1, 0), scene);
        light.intensity = 0.7;

        // –ó–æ–ª–æ—Ç–∞—è –∂–∏–ª–∞
        const goldOre = BABYLON.MeshBuilder.CreateSphere("goldOre", {diameter: 2}, scene);
        const goldMaterial = new BABYLON.StandardMaterial("goldMat", scene);
        goldMaterial.diffuseColor = new BABYLON.Color3(1, 0.843, 0); // –ó–æ–ª–æ—Ç–æ–π —Ü–≤–µ—Ç
        goldOre.material = goldMaterial;

        // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –∫–ª–∏–∫–µ
        function animateClick(mesh) {
            const anim = new BABYLON.Animation("clickAnim", "scaling", 30, BABYLON.Animation.ANIMATIONTYPE_VECTOR3, BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);
            const keys = [
                { frame: 0, value: new BABYLON.Vector3(1,1,1) },
                { frame: 10, value: new BABYLON.Vector3(1.2,1.2,1.2) },
                { frame: 20, value: new BABYLON.Vector3(1,1,1) }
            ];
            anim.setKeys(keys);
            mesh.animations = [];
            mesh.animations.push(anim);
            scene.beginAnimation(mesh, 0, 20, false);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤
        goldOre.actionManager = new BABYLON.ActionManager(scene);
        goldOre.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger, function () {
            gold += goldPerClick;
            clickCount += 1;
            animateClick(goldOre);
            updateUI();
        }));

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫ –∞–ø–≥—Ä–µ–π–¥–æ–≤
        document.getElementById('upgradeClick').addEventListener('click', () => {
            if (gold >= upgradeClickCost) {
                gold -= upgradeClickCost;
                goldPerClick += 1;
                upgradeClickCost = Math.floor(upgradeClickCost * 1.5);
                updateUI();
            }
        });

        document.getElementById('upgradeAuto').addEventListener('click', () => {
            if (gold >= upgradeAutoCost) {
                gold -= upgradeAutoCost;
                goldPerSecond += 1;
                autoUpgradeCount += 1;
                upgradeAutoCost = Math.floor(upgradeAutoCost * 1.7);
                updateUI();
            }
        });

        // –°–æ–∑–¥–∞–Ω–∏–µ GUI —Å Babylon.js (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
        /*
        const advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");
        // –î–æ–±–∞–≤—å—Ç–µ —ç–ª–µ–º–µ–Ω—Ç—ã GUI –∑–¥–µ—Å—å, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Babylon GUI –≤–º–µ—Å—Ç–æ HTML
        */

        // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å—Ü–µ–Ω—ã
        engine.runRenderLoop(() => {
            scene.render();
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤ –æ–∫–Ω–∞
        window.addEventListener('resize', () => {
            engine.resize();
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è UI –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        updateUI();
    </script>
</body>
</html>